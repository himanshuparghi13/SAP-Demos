sap.ui.define(
  [
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/m/MessageToast",
    "sap/ui/model/Filter",
    "sap/ui/model/FilterOperator",
  ],
  /**
   * @param {typeof sap.ui.core.mvc.Controller} Controller
   */
  function (Controller, JSONModel, MessageToast, Filter, FilterOperator) {
    "use strict";
    return Controller.extend("hp.project3.controller.Table", {
      onInit: function () {},
      //   onSave() {
      //     var oRouter = this.getOwnerComponent().getRouter();
      //     oRouter.navTo("RouteTable", {}, true);
      //   },

      //   onSelect: function (oEvent) {
      //     var bSelected = oEvent.getParameter("selected"),
      //       sText = oEvent.getSource().getText(),
      //       oTable = this.byId("NewTable"),
      //       aSticky = oTable.getSticky() || [];

      //     if (bSelected) {
      //       aSticky.push(sText);
      //     } else if (aSticky.length) {
      //       var iElementIndex = aSticky.indexOf(sText);
      //       aSticky.splice(iElementIndex, 1);
      //     }

      //     oTable.setSticky(aSticky);
      //   },

      //   	onToggleInfoToolbar: function(oEvent) {
      // 		var oTable = this.byId("NewTable");
      // 		oTable.getInfoToolbar().setVisible(!oEvent.getParameter("pressed"));
      // 	},

      //     onAIActionPress: function() {
      // 		MessageToast.show(
      // 			"This content was partially or fully generated by artificial intelligence (AI) technologies.\n\n" +
      // 			"The AI-generated content may contain inaccuracies due to using multiple information sources. Verify results before use."
      // 		);
      // 	}
    // onToggleInfoToolbar: function(oEvent) {
		// 	var oTable = this.byId("NewwTable");
		// 	oTable.getInfoToolbar().setVisible(!oEvent.getParameter("pressed"));
		// },

    	onSelect: function(oEvent) {
			var bSelected = oEvent.getParameter("selected"),
				sText = oEvent.getSource().getText(),
				oTable = this.byId("NewwTable"),
				aSticky = oTable.getSticky() || [];
				
				console.log(aSticky);
				console.log(bSelected);

			if (bSelected) {
				aSticky.push(sText);
			} else if (aSticky.length) {
				var iElementIndex = aSticky.indexOf(sText);
				aSticky.splice(iElementIndex, 1);
			}

			oTable.setSticky(aSticky);
		},

      onFilter: function (oEvent) {
        var aFilter = [];
        var sQuery = oEvent.getParameter("newValue");
        if (sQuery && sQuery.length > 0) {
          aFilter.push(new Filter({
              filters: [
                  new Filter("id", FilterOperator.Contains, sQuery),
                  new Filter("fileName", FilterOperator.Contains, sQuery),
                  new Filter("fileType", FilterOperator.Contains, sQuery),
                  new Filter("revision", FilterOperator.Contains, sQuery),
                  new Filter("status", FilterOperator.Contains, sQuery),
                  new Filter("fileSize", FilterOperator.Contains, sQuery),
                  new Filter("lastModified", FilterOperator.Contains, sQuery),
                  new Filter("modifiedBy", FilterOperator.Contains, sQuery),
                  new Filter("createdBy", FilterOperator.Contains, sQuery),
                  new Filter("createdOn", FilterOperator.Contains, sQuery),
                  
              ],
              and: false
          }));
        }
        var oTable = this.byId("NewwTable");
        var oBinding = oTable.getBinding("items");
        oBinding.filter(aFilter);
      },
    });
  },
);
